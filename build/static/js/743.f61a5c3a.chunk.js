"use strict";(self.webpackChunkgreen_call_crm=self.webpackChunkgreen_call_crm||[]).push([[743],{6787:(e,t,r)=>{r.d(t,{A:()=>n});const n=(0,r(3797).A)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},7743:(e,t,r)=>{r.r(t),r.d(t,{default:()=>f});var n=r(5043),o=r(6487),i=r(5099),a=r(917),s=r(9120),l=r(9589),d=r(5680),c=r(3458),p=r(8775),m=r(6787),x=r(1894),g=r(579);const f=e=>{let{crmData:t,updateCrmData:r,user:f,darkMode:b}=e;const[u,h]=(0,n.useState)(null),[y,j]=(0,n.useState)(!1),[v,w]=(0,n.useState)({status:"",notes:"",nextAction:""}),S=t.leads||[],z="sales-team"===f.role?S.filter(e=>e.assignedTo===f.name):S,k={padding:"0",background:b?"#111827":"#f9fafb",minHeight:"100vh"},A={background:b?"#1f2937":"white",borderRadius:"16px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",border:"1px solid "+(b?"#374151":"#e5e7eb"),transition:"all 0.3s ease"};return(0,g.jsxs)("div",{style:k,children:[(0,g.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,g.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"0.5rem"},children:[(0,g.jsx)(o.A,{style:{color:"#3b82f6"},size:32}),(0,g.jsx)("h1",{style:{fontSize:"2rem",fontWeight:"700",color:b?"white":"#1f2937",margin:0},children:"Lead Tracker"})]}),(0,g.jsx)("p",{style:{color:b?"#9ca3af":"#6b7280",fontSize:"1.125rem"},children:"Track and update lead status and activities"})]}),(0,g.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},children:[{label:"Total Leads",value:z.length,icon:o.A,color:"#3b82f6"},{label:"Active",value:z.filter(e=>["new","contacted","qualified"].includes(e.status)).length,icon:i.A,color:"#10b981"},{label:"Converted",value:z.filter(e=>"converted"===e.status).length,icon:a.A,color:"#22c55e"},{label:"Pipeline Value",value:`\u20b9${(z.reduce((e,t)=>e+(t.estimatedValue||0),0)/1e5).toFixed(1)}L`,icon:s.A,color:"#f59e0b"}].map((e,t)=>{const r=e.icon;return(0,g.jsx)("div",{style:{...A,padding:"1.5rem"},children:(0,g.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{style:{fontSize:"0.875rem",color:b?"#9ca3af":"#6b7280",marginBottom:"0.25rem"},children:e.label}),(0,g.jsx)("p",{style:{fontSize:"1.5rem",fontWeight:"700",color:b?"white":"#1f2937"},children:e.value})]}),(0,g.jsx)(r,{style:{color:e.color},size:28})]})},t)})}),(0,g.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(400px, 1fr))",gap:"1.5rem"},children:z.map(e=>{const t=(e=>{const t={new:{bg:b?"#1e3a8a":"#dbeafe",text:b?"#60a5fa":"#1d4ed8",border:"#3b82f6"},contacted:{bg:b?"#7c2d12":"#fed7aa",text:b?"#fb923c":"#ea580c",border:"#f97316"},qualified:{bg:b?"#065f46":"#dcfce7",text:b?"#34d399":"#059669",border:"#10b981"},converted:{bg:b?"#14532d":"#bbf7d0",text:b?"#4ade80":"#16a34a",border:"#22c55e"},lost:{bg:b?"#7f1d1d":"#fee2e2",text:b?"#f87171":"#dc2626",border:"#ef4444"},proposal:{bg:b?"#581c87":"#f3e8ff",text:b?"#c084fc":"#9333ea",border:"#a855f7"},negotiation:{bg:b?"#78350f":"#fef3c7",text:b?"#fbbf24":"#d97706",border:"#f59e0b"}};return t[e]||t.new})(e.status);return(0,g.jsxs)("div",{style:{...A,padding:"1.5rem",position:"relative"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-4px)",e.currentTarget.style.boxShadow="0 8px 25px rgba(0, 0, 0, 0.15)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 4px 6px rgba(0, 0, 0, 0.1)"},children:[(0,g.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",marginBottom:"1rem"},children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("h3",{style:{fontSize:"1.25rem",fontWeight:"600",color:b?"white":"#1f2937",margin:"0 0 0.25rem 0"},children:e.companyName}),(0,g.jsx)("p",{style:{color:b?"#9ca3af":"#6b7280",fontSize:"0.875rem",margin:0},children:e.contactPerson})]}),(0,g.jsx)("span",{style:{padding:"0.5rem 1rem",borderRadius:"20px",fontSize:"0.75rem",fontWeight:"600",textTransform:"capitalize",background:t.bg,color:t.text,border:`1px solid ${t.border}`},children:e.status})]}),(0,g.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[(0,g.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,g.jsx)(l.A,{size:16,style:{color:b?"#9ca3af":"#6b7280"}}),(0,g.jsx)("span",{style:{fontSize:"0.875rem",color:b?"#d1d5db":"#374151"},children:e.email})]}),(0,g.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,g.jsx)(d.A,{size:16,style:{color:b?"#9ca3af":"#6b7280"}}),(0,g.jsx)("span",{style:{fontSize:"0.875rem",color:b?"#d1d5db":"#374151"},children:e.phone})]}),(0,g.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,g.jsx)(s.A,{size:16,style:{color:b?"#9ca3af":"#6b7280"}}),(0,g.jsxs)("span",{style:{fontSize:"0.875rem",color:b?"#d1d5db":"#374151",fontWeight:"600"},children:["\u20b9",e.estimatedValue?Number(e.estimatedValue).toLocaleString():"0"]})]}),(0,g.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,g.jsx)(c.A,{size:16,style:{color:b?"#9ca3af":"#6b7280"}}),(0,g.jsx)("span",{style:{fontSize:"0.875rem",color:b?"#d1d5db":"#374151"},children:new Date(e.createdDate).toLocaleDateString()})]})]}),(0,g.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,g.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[(0,g.jsx)("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:b?"#d1d5db":"#374151"},children:"Progress"}),(0,g.jsxs)("span",{style:{fontSize:"0.875rem",color:b?"#9ca3af":"#6b7280"},children:[["new","contacted","qualified","proposal","negotiation","converted"].indexOf(e.status)+1,"/6"]})]}),(0,g.jsx)("div",{style:{width:"100%",height:"6px",background:b?"#374151":"#e5e7eb",borderRadius:"3px",overflow:"hidden"},children:(0,g.jsx)("div",{style:{width:(["new","contacted","qualified","proposal","negotiation","converted"].indexOf(e.status)+1)/6*100+"%",height:"100%",background:t.border,transition:"width 0.3s ease"}})})]}),(0,g.jsxs)("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end"},children:[(0,g.jsx)("button",{style:{padding:"0.5rem",borderRadius:"8px",border:"none",background:b?"#374151":"#f3f4f6",color:b?"#d1d5db":"#374151",cursor:"pointer",transition:"all 0.2s ease"},title:"Send Email",children:(0,g.jsx)(l.A,{size:16})}),(0,g.jsx)("button",{style:{padding:"0.5rem",borderRadius:"8px",border:"none",background:b?"#374151":"#f3f4f6",color:b?"#d1d5db":"#374151",cursor:"pointer",transition:"all 0.2s ease"},title:"Make Call",children:(0,g.jsx)(d.A,{size:16})}),(0,g.jsx)("button",{style:{padding:"0.5rem",borderRadius:"8px",border:"none",background:b?"#374151":"#f3f4f6",color:b?"#d1d5db":"#374151",cursor:"pointer",transition:"all 0.2s ease"},title:"View Details",children:(0,g.jsx)(p.A,{size:16})}),(0,g.jsxs)("button",{onClick:()=>(e=>{h(e),w({status:e.status||"new",notes:e.notes||"",nextAction:""}),j(!0)})(e),style:{padding:"0.5rem 1rem",borderRadius:"8px",border:"none",background:"linear-gradient(135deg, #667eea, #764ba2)",color:"white",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",fontWeight:"500"},title:"Update Status",children:[(0,g.jsx)(m.A,{size:14}),"Update"]})]})]},e._id||e.id)})}),0===z.length&&(0,g.jsxs)("div",{style:{...A,padding:"3rem",textAlign:"center",marginTop:"2rem"},children:[(0,g.jsx)(o.A,{size:48,style:{color:b?"#9ca3af":"#6b7280",marginBottom:"1rem"}}),(0,g.jsx)("h3",{style:{fontSize:"1.25rem",fontWeight:"600",color:b?"white":"#1f2937",marginBottom:"0.5rem"},children:"No leads assigned"}),(0,g.jsx)("p",{style:{color:b?"#9ca3af":"#6b7280"},children:"Contact your manager to get leads assigned"})]}),y&&(0,g.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:(0,g.jsxs)("div",{style:{background:b?"#1f2937":"white",borderRadius:"16px",width:"90%",maxWidth:"500px",boxShadow:"0 20px 25px rgba(0, 0, 0, 0.1)"},children:[(0,g.jsxs)("div",{style:{padding:"1.5rem",borderBottom:"1px solid "+(b?"#374151":"#e5e7eb"),display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,g.jsxs)("h3",{style:{fontSize:"1.25rem",fontWeight:"600",color:b?"white":"#1f2937",margin:0},children:["Update Lead: ",null===u||void 0===u?void 0:u.companyName]}),(0,g.jsx)("button",{onClick:()=>j(!1),style:{background:"transparent",border:"none",fontSize:"1.5rem",cursor:"pointer",color:b?"#9ca3af":"#6b7280",padding:"0.25rem"},children:"\xd7"})]}),(0,g.jsxs)("div",{style:{padding:"1.5rem"},children:[(0,g.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,g.jsx)("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:b?"#d1d5db":"#374151",marginBottom:"0.5rem"},children:"Lead Status"}),(0,g.jsxs)("select",{value:v.status,onChange:e=>w({...v,status:e.target.value}),style:{width:"100%",padding:"0.75rem",border:"2px solid "+(b?"#374151":"#e5e7eb"),borderRadius:"8px",background:b?"#374151":"white",color:b?"white":"#1f2937",fontSize:"1rem",outline:"none"},children:[(0,g.jsx)("option",{value:"new",children:"New"}),(0,g.jsx)("option",{value:"contacted",children:"Contacted"}),(0,g.jsx)("option",{value:"qualified",children:"Qualified"}),(0,g.jsx)("option",{value:"proposal",children:"Proposal"}),(0,g.jsx)("option",{value:"negotiation",children:"Negotiation"}),(0,g.jsx)("option",{value:"converted",children:"Converted"}),(0,g.jsx)("option",{value:"lost",children:"Lost"})]})]}),(0,g.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,g.jsx)("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:b?"#d1d5db":"#374151",marginBottom:"0.5rem"},children:"Notes"}),(0,g.jsx)("textarea",{value:v.notes,onChange:e=>w({...v,notes:e.target.value}),placeholder:"Add notes about this update...",rows:"3",style:{width:"100%",padding:"0.75rem",border:"2px solid "+(b?"#374151":"#e5e7eb"),borderRadius:"8px",background:b?"#374151":"white",color:b?"white":"#1f2937",fontSize:"1rem",outline:"none",resize:"vertical"}})]}),(0,g.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,g.jsx)("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:b?"#d1d5db":"#374151",marginBottom:"0.5rem"},children:"Next Action"}),(0,g.jsx)("input",{type:"text",value:v.nextAction,onChange:e=>w({...v,nextAction:e.target.value}),placeholder:"What's the next step?",style:{width:"100%",padding:"0.75rem",border:"2px solid "+(b?"#374151":"#e5e7eb"),borderRadius:"8px",background:b?"#374151":"white",color:b?"white":"#1f2937",fontSize:"1rem",outline:"none"}})]}),(0,g.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:"1rem"},children:[(0,g.jsx)("button",{onClick:()=>j(!1),style:{padding:"0.75rem 1.5rem",border:"2px solid "+(b?"#374151":"#e5e7eb"),borderRadius:"8px",background:"transparent",color:b?"#d1d5db":"#374151",cursor:"pointer",fontSize:"1rem",fontWeight:"500"},children:"Cancel"}),(0,g.jsxs)("button",{onClick:async()=>{try{const e={...u,status:v.status,lastActivity:(new Date).toISOString(),notes:v.notes};await x.A.updateLead(u._id,e);const t=await x.A.getAllLeads();r({leads:t}),j(!1),h(null),alert("Lead updated successfully!")}catch(e){console.error("Error updating lead:",e),alert("Error updating lead. Please try again.")}},style:{padding:"0.75rem 1.5rem",border:"none",borderRadius:"8px",background:"linear-gradient(135deg, #667eea, #764ba2)",color:"white",cursor:"pointer",fontSize:"1rem",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,g.jsx)(a.A,{size:16}),"Update Lead"]})]})]})]})})]})}},9120:(e,t,r)=>{r.d(t,{A:()=>n});const n=(0,r(3797).A)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])}}]);
//# sourceMappingURL=743.f61a5c3a.chunk.js.map