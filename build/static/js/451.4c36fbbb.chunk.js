"use strict";(self.webpackChunkgreen_call_crm=self.webpackChunkgreen_call_crm||[]).push([[451],{9451:(e,t,r)=>{r.r(t),r.d(t,{default:()=>m});var n=r(5043),i=r(8296);const o=(0,r(3797).A)("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);var s=r(917),a=r(987),l=r(3458),c=r(2817),d=r(8068),g=r(579);const m=e=>{let{darkMode:t,currentUser:r}=e;const[m,f]=(0,n.useState)(null),[p,h]=(0,n.useState)(!1),[x,y]=(0,n.useState)([]),[u,b]=(0,n.useState)(""),[j,k]=(0,n.useState)(!1);(0,n.useEffect)(()=>{const e=JSON.parse(localStorage.getItem("checkIns")||"[]");y(e)},[]);const v=()=>{if(k(!0),!navigator.geolocation)return(0,d.P)("error","\u274c Geolocation not supported"),void k(!1);navigator.geolocation.getCurrentPosition(async e=>{const{latitude:t,longitude:r}=e.coords;f({lat:t,lng:r});try{const e=await S(t,r);b(e),(0,d.P)("success","\ud83d\udccd Location updated successfully")}catch(n){b(`${t.toFixed(6)}, ${r.toFixed(6)}`)}k(!1)},e=>{(0,d.P)("error","\u274c Unable to get location"),k(!1)},{enableHighAccuracy:!0,timeout:1e4})},S=async(e,t)=>{const r=["Green Valley Business Park, Sector 18, Gurgaon","Cyber City, DLF Phase 2, Gurgaon","MG Road, Connaught Place, New Delhi","Bandra Kurla Complex, Mumbai","Electronic City, Bangalore"];return r[Math.floor(Math.random()*r.length)]},z={padding:"0",background:t?"#111827":"#f9fafb",minHeight:"100vh"},w={background:t?"#1f2937":"white",borderRadius:"16px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",border:"1px solid "+(t?"#374151":"#e5e7eb")};return(0,g.jsxs)("div",{style:z,children:[(0,g.jsx)("div",{style:{marginBottom:"2rem"},children:(0,g.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"0.5rem"},children:[(0,g.jsx)(i.A,{style:{color:"#22c55e"},size:32}),(0,g.jsxs)("div",{children:[(0,g.jsx)("h1",{style:{fontSize:"2rem",fontWeight:"700",color:t?"white":"#1f2937",margin:0},children:"Location Tracker"}),(0,g.jsx)("p",{style:{color:t?"#9ca3af":"#6b7280",fontSize:"1.125rem",margin:0},children:"Track field sales team locations and check-ins"})]})]})}),(0,g.jsxs)("div",{style:{...w,padding:"2rem",marginBottom:"2rem"},children:[(0,g.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1.5rem"},children:[(0,g.jsxs)("h3",{style:{fontSize:"1.25rem",fontWeight:"600",color:t?"white":"#1f2937",margin:0,display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,g.jsx)(o,{style:{color:"#22c55e"},size:20}),"Current Location"]}),(0,g.jsxs)("div",{style:{display:"flex",gap:"0.5rem"},children:[(0,g.jsxs)("button",{onClick:v,disabled:j,style:{padding:"0.5rem 1rem",background:j?"#9ca3af":"linear-gradient(135deg, #22c55e, #4ade80)",color:"white",border:"none",borderRadius:"8px",cursor:j?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"500",display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,g.jsx)(i.A,{size:16}),j?"Getting...":"Get Location"]}),p?(0,g.jsx)("button",{onClick:()=>{h(!1),window.trackingInterval&&clearInterval(window.trackingInterval),(0,d.P)("info","\u23f9\ufe0f Location tracking stopped")},style:{padding:"0.5rem 1rem",background:"linear-gradient(135deg, #ef4444, #f87171)",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500"},children:"Stop Tracking"}):(0,g.jsx)("button",{onClick:()=>{if(!navigator.geolocation)return void(0,d.P)("error","\u274c Geolocation not supported");h(!0),(0,d.P)("info","\ud83d\udccd Location tracking started");const e=setInterval(()=>{v()},3e5);window.trackingInterval=e},style:{padding:"0.5rem 1rem",background:"linear-gradient(135deg, #3b82f6, #60a5fa)",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500"},children:"Start Tracking"})]})]}),m?(0,g.jsxs)("div",{style:{background:t?"#374151":"#f9fafb",padding:"1.5rem",borderRadius:"12px",marginBottom:"1.5rem"},children:[(0,g.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[(0,g.jsx)(s.A,{style:{color:"#22c55e"},size:20}),(0,g.jsx)("span",{style:{fontSize:"1rem",fontWeight:"600",color:"#22c55e"},children:"Location Available"})]}),(0,g.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{style:{fontSize:"0.875rem",color:t?"#9ca3af":"#6b7280",marginBottom:"0.25rem"},children:"Latitude"}),(0,g.jsx)("p",{style:{fontSize:"1rem",fontWeight:"600",color:t?"white":"#1f2937",margin:0},children:m.lat.toFixed(6)})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{style:{fontSize:"0.875rem",color:t?"#9ca3af":"#6b7280",marginBottom:"0.25rem"},children:"Longitude"}),(0,g.jsx)("p",{style:{fontSize:"1rem",fontWeight:"600",color:t?"white":"#1f2937",margin:0},children:m.lng.toFixed(6)})]})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{style:{fontSize:"0.875rem",color:t?"#9ca3af":"#6b7280",marginBottom:"0.25rem"},children:"Address"}),(0,g.jsx)("p",{style:{fontSize:"1rem",fontWeight:"500",color:t?"white":"#1f2937",margin:0},children:u||"Getting address..."})]})]}):(0,g.jsxs)("div",{style:{background:t?"#374151":"#f9fafb",padding:"2rem",borderRadius:"12px",textAlign:"center",marginBottom:"1.5rem"},children:[(0,g.jsx)(a.A,{style:{color:"#f59e0b",marginBottom:"1rem"},size:48}),(0,g.jsx)("p",{style:{fontSize:"1rem",color:t?"#9ca3af":"#6b7280",margin:0},children:'Click "Get Location" to access your current position'})]}),m&&(0,g.jsxs)("div",{style:{display:"flex",gap:"1rem"},children:[(0,g.jsxs)("button",{onClick:async()=>{if(!m)return void(0,d.P)("error","\u274c Please get location first");const e=[{id:Date.now(),userId:(null===r||void 0===r?void 0:r.name)||"Unknown",location:m,address:u,timestamp:(new Date).toISOString(),type:"check-in"},...x];y(e),localStorage.setItem("checkIns",JSON.stringify(e)),(0,d.P)("success","\u2705 Checked in successfully!")},style:{flex:1,padding:"1rem",background:"linear-gradient(135deg, #22c55e, #4ade80)",color:"white",border:"none",borderRadius:"12px",cursor:"pointer",fontSize:"1rem",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[(0,g.jsx)(s.A,{size:20}),"Check In"]}),(0,g.jsxs)("button",{onClick:async()=>{if(!m)return void(0,d.P)("error","\u274c Please get location first");const e=[{id:Date.now(),userId:(null===r||void 0===r?void 0:r.name)||"Unknown",location:m,address:u,timestamp:(new Date).toISOString(),type:"check-out"},...x];y(e),localStorage.setItem("checkIns",JSON.stringify(e)),(0,d.P)("success","\u2705 Checked out successfully!")},style:{flex:1,padding:"1rem",background:"linear-gradient(135deg, #ef4444, #f87171)",color:"white",border:"none",borderRadius:"12px",cursor:"pointer",fontSize:"1rem",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[(0,g.jsx)(a.A,{size:20}),"Check Out"]})]})]}),(0,g.jsxs)("div",{style:{...w,padding:"2rem"},children:[(0,g.jsxs)("h3",{style:{fontSize:"1.25rem",fontWeight:"600",color:t?"white":"#1f2937",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,g.jsx)(l.A,{style:{color:"#3b82f6"},size:20}),"Check-in History"]}),x.length>0?(0,g.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:x.slice(0,10).map(e=>(0,g.jsxs)("div",{style:{background:t?"#374151":"#f9fafb",padding:"1.5rem",borderRadius:"12px",border:"2px solid "+("check-in"===e.type?"#22c55e":"#ef4444")},children:[(0,g.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1rem"},children:[(0,g.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:["check-in"===e.type?(0,g.jsx)(s.A,{style:{color:"#22c55e"},size:20}):(0,g.jsx)(a.A,{style:{color:"#ef4444"},size:20}),(0,g.jsx)("span",{style:{fontSize:"1rem",fontWeight:"600",color:"check-in"===e.type?"#22c55e":"#ef4444",textTransform:"capitalize"},children:e.type.replace("-"," ")})]}),(0,g.jsx)("span",{style:{fontSize:"0.875rem",color:t?"#9ca3af":"#6b7280"},children:new Date(e.timestamp).toLocaleString()})]}),(0,g.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:[(0,g.jsx)(c.A,{size:16,style:{color:t?"#9ca3af":"#6b7280"}}),(0,g.jsx)("span",{style:{fontSize:"0.875rem",color:t?"#d1d5db":"#374151"},children:e.userId})]}),(0,g.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,g.jsx)(i.A,{size:16,style:{color:t?"#9ca3af":"#6b7280"}}),(0,g.jsx)("span",{style:{fontSize:"0.875rem",color:t?"#d1d5db":"#374151"},children:e.address})]})]},e.id))}):(0,g.jsxs)("div",{style:{background:t?"#374151":"#f9fafb",padding:"2rem",borderRadius:"12px",textAlign:"center"},children:[(0,g.jsx)(l.A,{style:{color:t?"#9ca3af":"#6b7280",marginBottom:"1rem"},size:48}),(0,g.jsx)("p",{style:{fontSize:"1rem",color:t?"#9ca3af":"#6b7280",margin:0},children:"No check-ins recorded yet"})]})]})]})}}}]);
//# sourceMappingURL=451.4c36fbbb.chunk.js.map